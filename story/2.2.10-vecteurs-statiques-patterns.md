# Story 2.2.10 : Vecteurs statiques et interface patterns Paris

**Status:** Draft  
**Epic:** Epic 2 - Système de Simulation et Prédiction  
**Story Number:** 2.2.10

---

## Story

**As a** système de simulation,  
**I want** implémenter vecteurs statiques (3×3 par microzone) comme interface patterns Paris → modèle,  
**so that** les patterns Paris peuvent influencer régimes ET intensités.

---

## Acceptance Criteria

1. Vecteurs statiques implémentés: 3 vecteurs (agressions, incendies, accidents) × 3 valeurs (bénin, moyen, grave) par microzone
2. Influence sur régimes: Vecteurs statiques modifient probabilités régimes (Stable/Détérioration/Crise)
3. Influence sur intensités: Vecteurs statiques modifient intensités λ_base(τ,g)
4. **Vecteurs statiques** : **chargés depuis `data/source_data/`** (pré-calculés Epic 1, Story 1.3). Interface patterns Paris → modèle (lecture `data/patterns/`, application).
5. Tests unitaires : influence régimes, influence intensités, chargement.

---

## Integration Verification

IV1: Vecteurs statiques chargés depuis `data/source_data/` ; influence régimes et intensités correcte.  
IV2: Lecture patterns et application OK.

---

## Tasks / Subtasks

- [ ] Implémenter chargement vecteurs statiques depuis `data/source_data/` (Epic 1, Story 1.3)
- [ ] Implémenter structure vecteurs statiques (3×3 par microzone)
- [ ] Implémenter influence sur régimes (modification probabilités Stable/Détérioration/Crise)
- [ ] Implémenter influence sur intensités (modification λ_base(τ,g))
- [ ] Implémenter interface patterns Paris → modèle (lecture `data/patterns/`, application)
- [ ] Tests : influence régimes, influence intensités, chargement

---

## Dev Notes

### Architecture Context

- **Vecteurs statiques** : 3 vecteurs (agressions, incendies, accidents) × 3 valeurs (bénin, moyen, grave) par microzone
- **Interface patterns Paris** : Vecteurs statiques servent d'interface entre patterns Paris et modèle
- **Influence régimes** : Modification probabilités régimes (Stable/Détérioration/Crise)
- **Influence intensités** : Modification intensités λ_base(τ,g)
- **Chargement** : Depuis `data/source_data/` (pré-calculés Epic 1, Story 1.3)
- **Patterns Paris** : Lecture depuis `data/patterns/`, application via vecteurs statiques

### Source Tree

```
src/core/generation/
└── vector_generator.py      # Utilisation vecteurs statiques

src/core/patterns/
└── pattern_loader.py        # Interface patterns Paris

data/source_data/
└── vecteurs_statiques.pkl   # Vecteurs statiques pré-calculés (Epic 1, Story 1.3)

data/patterns/               # Patterns Paris (JSON)
```

### Dependencies

- Vecteurs statiques : Epic 1, Story 1.3 (pré-calculés)
- Patterns : Story 2.2.2 (lecture patterns)
- Régimes : Story 2.2.1 (modification probabilités)
- Intensités : Story 2.2.1 (modification λ_base)

### Utilisation vecteurs statiques

```python
# Chargement
vecteurs_statiques = load_from_pickle("data/source_data/vecteurs_statiques.pkl")

# Influence sur régimes
prob_regime = calcul_prob_regime_base()
prob_regime *= facteur_vecteurs_statiques(microzone, vecteurs_statiques)

# Influence sur intensités
lambda_base = calcul_lambda_base(type, gravite)
lambda_base *= facteur_vecteurs_statiques(microzone, type, gravite, vecteurs_statiques)
```

### Testing Standards

- Tests unitaires : Influence régimes, influence intensités, chargement
- Tests de validation : Vecteurs statiques chargés correctement, influence appliquée
- Framework : pytest
- Emplacement : `tests/core/generation/test_vector_generator.py`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 28 Jan 2026 | 1.0 | Création story | PM |
