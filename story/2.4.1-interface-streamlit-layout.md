# Story 2.4.1 : Interface Streamlit — layout et contrôles de base

**Status:** Draft  
**Epic:** Epic 2 - Système de Simulation et Prédiction  
**Story Number:** 2.4.1

---

## Story

**As a** utilisateur,  
**I want** une interface web Streamlit avec layout défini (carte centre, colonnes gauche/droite, bandeaux),  
**so that** je peux interagir avec le système de simulation.

---

## Acceptance Criteria

1. Application Streamlit dans `src/ui/web_app.py`.
2. Layout 3 colonnes : liste événements/incidents (gauche), carte Paris (centre), **liste de rectangles** arrondissements (droite — un rectangle par arrondissement, chaque nom dans un rectangle). Bandeaux haut/bas (cf. spécifications UI détaillées).
3. **Carte** : **affichage immédiat des 100 microzones** (données pré-calculées Epic 1).
4. Bandeau haut : expander scénario, variabilité ; bloc ML 3×2 (haut droite). Bandeau bas : nombre de jours (défaut 365), Jours X/Total (avec %), Run X/50, [Lancer], [Stop], [Reprendre].
5. Widgets Streamlit (selectbox, slider, button, radio) ; codes couleur, charte (pastel, Inter, français), emojis (FR20/FR25/FR26).
6. Tests manuels : layout, widgets, carte.

---

## Integration Verification

IV1: Vérifier que Streamlit peut être lancé (`streamlit run src/ui/web_app.py`)  
IV2: Vérifier que la carte Folium s'affiche correctement dans Streamlit  
IV3: Vérifier que les widgets fonctionnent (sélections, boutons)

---

## Tasks / Subtasks

- [ ] Créer application Streamlit (`src/ui/web_app.py`)
- [ ] Implémenter layout 3 colonnes (gauche, centre, droite)
- [ ] Implémenter bandeau haut (expander scénario, variabilité, bloc ML 3×2)
- [ ] Implémenter bandeau bas (jours, progression, boutons)
- [ ] Implémenter colonne gauche (liste événements/incidents)
- [ ] Implémenter colonne centre (carte Paris avec 100 microzones)
- [ ] Implémenter colonne droite (rectangles arrondissements)
- [ ] Charger données 100 microzones depuis pré-calculs Epic 1
- [ ] Implémenter widgets Streamlit (selectbox, slider, button, radio)
- [ ] Appliquer charte visuelle (pastel, Inter, français, emojis)
- [ ] Tests manuels : layout, widgets, carte

---

## Dev Notes

### Architecture Context

- **Interface Streamlit** : Remplacement Tkinter par Streamlit (FR10)
- **Layout** : 3 colonnes (gauche: événements, centre: carte, droite: rectangles arrondissements) + bandeaux haut/bas
- **Carte** : 100 microzones avec délimitation visible (FR27)
- **Bandeau haut** : Expander scénario/variabilité, bloc ML 3×2 (haut droite)
- **Bandeau bas** : Jours (défaut 365), progression, boutons [Lancer], [Stop], [Reprendre]
- **Charte visuelle** : Police Inter, thème clair, couleurs pastel, français uniquement (FR20)

### Source Tree

```
src/adapters/ui/
└── streamlit_app.py         # Application Streamlit

data/source_data/
└── microzones.pkl           # 100 microzones (Epic 1)
```

### Dependencies

- Streamlit : Interface web
- Folium : Cartes interactives
- GeoPandas : Données géospatiales
- Microzones : Pré-calculées Epic 1

### Testing Standards

- Tests manuels : Layout, widgets, carte
- Framework : Tests manuels (pas d'automatisation pour UI Streamlit en MVP)
- Emplacement : Tests manuels documentés

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 28 Jan 2026 | 1.0 | Création story | PM |
