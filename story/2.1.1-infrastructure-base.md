# Story 2.1.1 : Infrastructure de base et structure de projet

**Status:** Draft  
**Epic:** Epic 2 - Système de Simulation et Prédiction  
**Story Number:** 2.1.1

---

## Story

**As a** développeur,  
**I want** une structure de dossiers modulaire et des classes de base (Vector, Event),  
**so that** l'implémentation des fonctionnalités complexes peut commencer sur des fondations solides.

---

## Acceptance Criteria

1. Structure de dossiers alignée avec les contraintes techniques : `config/`, `scripts/`, `src/data/`, `src/golden_hour/`, `src/events/`, `src/patterns/`, `src/ml/`, `src/ui/`, `data/source_data/`, `data/intermediate/`, `data/models/`, `data/patterns/`, `tests/`.
2. Classe `Vector` (bénin, moyen, grave). **Events** : `Event` ; **Incidents** = opposés aux événements positifs (accident grave, incendie grave, agression grave) ; **PositiveEvent** avec sous-classes concrètes : Fin travaux, Nouvelle caserne, Amélioration matériel, etc.
3. `requirements.txt` avec dépendances (GeoPandas, Pandas, Folium, Streamlit, scikit-learn, SHAP, numpy).
4. README avec installation et démarrage.
5. Tests unitaires de base pour `Vector`.

---

## Integration Verification

IV1: Imports GeoPandas, Pandas, Folium fonctionnent.  
IV2: La structure n'interfère pas avec `brainstorming/`, `docs/`, etc.

---

## Tasks / Subtasks

- [ ] Créer structure de dossiers complète (src/, data/, tests/)
- [ ] Créer classe Vector (bénin, moyen, grave)
- [ ] Créer classe Event (base abstraite)
- [ ] Créer classes EventGrave (AccidentGrave, IncendieGrave, AgressionGrave)
- [ ] Créer classe PositiveEvent (base abstraite)
- [ ] Créer sous-classes PositiveEvent (FinTravaux, NouvelleCaserne, AmeliorationMateriel)
- [ ] Créer requirements.txt avec toutes dépendances
- [ ] Créer README.md (installation, démarrage)
- [ ] Tests unitaires : Vector (création, validation valeurs)

---

## Dev Notes

### Architecture Context

- **Architecture Hexagonale** : Séparation Core Domain / Application Services / Adapters
- **Structure modulaire** : Organisation par domaine fonctionnel (generation/, golden_hour/, events/, patterns/, ml/, ui/)
- **Events** : Hiérarchie avec Event (base), EventGrave (accidents/incendies/agressions), PositiveEvent (fin travaux, caserne, matériel)
- **Vector** : Structure simple (bénin, moyen, grave) pour représenter incidents

### Source Tree

```
src/
├── core/
│   ├── generation/
│   ├── golden_hour/
│   ├── events/
│   │   ├── event.py              # Base Event (ABC)
│   │   ├── event_grave.py        # EventGrave (ABC)
│   │   ├── accident_grave.py     # AccidentGrave
│   │   ├── incendie_grave.py     # IncendieGrave
│   │   ├── agression_grave.py    # AgressionGrave
│   │   ├── positive_event.py      # PositiveEvent (ABC)
│   │   ├── fin_travaux.py        # FinTravaux
│   │   ├── nouvelle_caserne.py   # NouvelleCaserne
│   │   └── amelioration_materiel.py  # AmeliorationMateriel
│   ├── patterns/
│   └── state/
├── services/
├── adapters/
└── data/
    ├── constants.py              # VECTOR_INDEX_BENIN, etc.
    └── adjacents.py              # Arrondissements adjacents
```

### Dependencies

- Python 3.12
- Conda environnement `paris_risques`
- GeoPandas, Pandas, Folium, Streamlit, scikit-learn, SHAP, numpy

### Testing Standards

- Tests unitaires : Classe Vector (création, validation)
- Framework : pytest (recommandé PRD)
- Emplacement : `tests/core/` ou `tests/src/data/`
- Couverture : Au minimum composants critiques

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 28 Jan 2026 | 1.0 | Création story | PM |
